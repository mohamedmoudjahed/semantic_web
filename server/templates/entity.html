{% extends "base.html" %}
{% block title %}{{ label }} - Tolkien KG{% endblock %}

{% block content %}
<div class="entity-header">
    {% if image %}
    <img src="{{ image }}" alt="{{ label }}" class="entity-image" onerror="this.style.display='none'">
    {% endif %}
    <div class="entity-info">
        <h1>{{ label }}</h1>
        <div class="entity-uri">{{ uri }}</div>
        <div class="entity-types">
            {% for t in types %}
            <span class="type-badge">{{ t }}</span>
            {% endfor %}
        </div>
        {% if description %}
        <p class="entity-description">{{ description }}</p>
        {% endif %}
    </div>
</div>

{% if metw_card %}
<div class="metw-card">
    <h3>METW Card <span class="data-source metw">External: Middle Earth: The Wizards</span></h3>
    <p><strong>{{ metw_card.name }}</strong></p>
    {% if metw_card.type %}<p>Type: {{ metw_card.type }}</p>{% endif %}
    {% if metw_card.text %}<p style="font-style:italic;">{{ metw_card.text }}</p>{% endif %}
    <div class="stats">
        {% if metw_card.prowess %}
        <div class="stat">
            <div class="stat-value">{{ metw_card.prowess }}</div>
            <div class="stat-label">Prowess</div>
        </div>
        {% endif %}
        {% if metw_card.body %}
        <div class="stat">
            <div class="stat-value">{{ metw_card.body }}</div>
            <div class="stat-label">Body</div>
        </div>
        {% endif %}
    </div>
</div>
{% endif %}

{% if external_links %}
<div class="external-links">
    <h3>External Links (owl:sameAs / rdfs:seeAlso)</h3>
    {% for link in external_links %}
    <a href="{{ link.uri }}" target="_blank" class="external-link {{ link.type }}">
        {{ link.type|upper }}
    </a>
    {% endfor %}
</div>
{% endif %}

{# Affichage des labels multilingues (via LOTR Fandom Wiki) #}
{% if labels|length > 1 %}
<div class="multilingual-labels">
    <h3>Names in Multiple Languages <span class="fandom-badge">via LOTR Fandom Wiki</span></h3>
    <div style="margin-top: 10px;">
        {% for lbl in labels %}
        <div class="lang-label-row">
            <span class="lang-code">{{ lbl.lang or 'en' }}</span>
            <span class="lang-value">{{ lbl.value }}</span>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<div class="section">
    <h2>Properties</h2>
    <table class="properties-table">
        {% for p in properties %}
        <tr>
            <th>{{ p.name }}{% if p.source %} <span class="data-source {{ p.source }}">{{ p.source|upper }}</span>{% endif %}</th>
            <td>{{ p.value|safe }}</td>
        </tr>
        {% endfor %}
    </table>
</div>

<div class="formats">
    <strong>Other formats:</strong>
    <a href="{{ request.path }}?format=turtle">Turtle</a>
    <a href="{{ request.path }}?format=rdfxml">RDF/XML</a>
    <a href="{{ request.path }}?format=jsonld">JSON-LD</a>
    |
    <strong>Inference:</strong>
    <a href="/reasoning/{{ uri.split('/')[-1] }}">View with Reasoning</a>
</div>
{% endblock %}
